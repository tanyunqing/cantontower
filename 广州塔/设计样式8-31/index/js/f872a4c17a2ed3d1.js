!function(){function e(e,n){function t(){return x.get(e)}function r(){var n=t();if(void 0==n)x.set(e,i,options);else{var r=n.split(",");r.push(i)>5&&r.shift(),x.set(e,r.toString(),options)}}function o(){var e=t().split(","),n=e.length,r=e[n-1],o="";return n>1&&(o=e[n-2]),[r,o]}var i=n();return options={expires:356,path:"/"},{get:t,set:r,getLast:o}}function n(e){e||S.set(),b.set()}function t(e,n){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=e;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o),r(t,"load",n)}function r(e,n,t){e.addEventListener?e&&e.addEventListener(n,t,!1):e&&e.attachEvent("on"+n,t)}function o(e,n){function t(e,n){var t=document.createElement("a");return t.href=n,e===t.hostname}var r,o=28800;if(!t(document.domain,top.document.referrer))return!1;if(void 0==e)r=!1;else{var i=e.split(","),a=parseInt(i.slice(-1));r=!(Math.abs(n-+a)>o)}return r}function i(e,n,r,o){function i(e){return"undefined"==typeof e?"":e}var a="//stat.tf.360.cn/search/c.js?u="+e;qsLoad=0;var c={set:function(){if("undefined"!=typeof _e360_uid){var e="",n=[],t=i(_e360_uid),r=i(_e360_campaignid),o=i(_e360_groupid),a=i(_e360_creativeid),c=i(_e360_keywordid),s=i(_e360_commerce);t?(n=[t,r,o,a,c],s&&n.push(s)):s&&(n=[s]),e=n.join(","),window.localStorage?localStorage.setItem("s_e360",e):x.set("s_e360",e,{expires:1,path:"/"})}},get:function(){var e=window.localStorage?localStorage.getItem("s_e360"):x.get("s_e360"),n={};if(void 0!=e&&""!==e){e=e||"",e=e.split(",");var t=e.length,r=["e_uid","e_cid","e_gid","e_yid","e_kid","e_com"];if(""!=e[0])switch(t){case 1:n.e_com=e[0];break;case 5:case 6:for(var o=0;o<t;o++)n[r[o]]=e[o]}return n}}};""==e||n||t(a,function(){c.set();var e=c.get();void 0!=e&&(e.et=qsLoad,isDataSended||(_qha("send",e),isDataSended=!0))})}function a(e){var n={};return n.cl=v.pixelDepth||v.colorDepth||"0",n.ds=v.width+"x"+v.height,n.ln=navigator.language||navigator.browserLanguage||"unknown",n.ck=e,n.su=top.document.referrer,n.et=qsLoad=0,n}function c(e,n,t){var r={};r.si=e,r.url=window.location.href,r.flt=n,r.v=t;var o=S.getLast();r.lt=o[0],""!==o[1]&&(r.lt2=o[1]);var i=b.getLast();return r.pt=i[0],""!==i[1]&&(r.pt2=i[1]),r}function s(e){return function(n){var t,r=!1;for(var o in e.split(","))if(t=new RegExp(o.replace("*",".*")),t.test(location.href)){r=!0;break}if(r){n=_.fixTarget(n);var i=n.clientX,a=n.clientY,c=m.getScroll(),s=c.scrollY,u=c.scrollX;_qha("send",{et:10,x:k(i+u),y:a+s})}}}function u(e){return function(n){n=_.fixTarget(n);var t=n.target,r=t.id;r&&e.indexOf(r)>-1&&_qha("send",{et:11,ep:r})}}function d(e){var n=document.createElement("iframe");n.height=1,n.width=1,n.name=e,n.src=document.location.protocol+"//360fenxi.mediav.com/mv.html",n.onload="",f(n,e),document.body?document.body.appendChild(n):setTimeout(function(){document.body.appendChild(n)},0)}function f(e,n){function t(e){var t={et:20,eid:n,ep:e};_qha("send",t)}function o(e){"http://360fenxi.mediav.com"===e.origin&&t(e.data)}var i="postMessage"in window;i?r(window,"message",o):window.navigator._qha_message=function(e){t(e)}}function l(){var e={},n=3;return e.et=n,e.ep=m.nowBySeconds()-T,e}function g(e){var n,t=[],r=location.href;for(var o in idClks){var n=new RegExp(o.replace("*",".*"));n.test(r)&&t.push(idClks[o])}return w.distinct(t.join(",").split(","))}if(!window._qha||window._qha.init!==!0){var p="2.0.0",v=window.screen;_qha_data=window._qha_data,domainId=_qha_data.domain,dianjingUser=_qha_data.e360,pageClks=_qha_data.pageClk,isTrackUrlClick=1===_qha_data.urlClk,idClks=_qha_data.idClk,mvid=_qha_data.mvid,sGif=window.location.protocol+"//"+_qha_data.host+"/s.gif",isDataSended=!1,"undefined"==typeof console&&(console={info:function(){}});var m={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},now:function(){return(new Date).getTime()},nowBySeconds:function(){return parseInt(this.now()/1e3)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},getScroll:function(){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(document.compatMode||""),t=e?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft,r=e?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop;return{scrollX:t,scrollY:r}},getBrowser:function(){var e=navigator.userAgent.toLowerCase(),n={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(var t in n)if(e.indexOf(n[t])>-1)return t;var r=!1;try{+external.twGetVersion(external.twGetSecurityID(window)).replace(/\./g,"")>1013&&(r=!0)}catch(o){}if(r)return"360se-noua";var i=e.match(/(msie|chrome|safari|firefox|opera|trident)/);return i=i?i[0]:""},guid:function(){function e(e){var n=0,t=0,r=e.length-1;for(r;r>=0;r--){var o=parseInt(e.charCodeAt(r),10);n=(n<<6&4294967295)+o+(o<<14),0!=(t=4261412864&n)&&(n^=t>>21)}return n}function n(){var n=[navigator.appName,navigator.version,navigator.language||navigator.browserLanguage,navigator.platform,navigator.userAgent,v.width,"x",v.height,v.colorDepth,document.referrer].join("");for(sLen=n.length,hLen=window.history.length;hLen;)n+=hLen--^sLen++;return 2147483647*(Math.round(2147483647*Math.random())^e(n))}return n()}},h=function(){function e(e){var n,t=[];for(var r in e)n=e[r],m.isString(n)&&(n='"'+n+'"'),t.push('"'+r+'":'+n);return"{"+t.join(",")+"}"}function n(n){if(!m.isArray(n))return"";if(window.JSON)return JSON.stringify(n);for(var t=[],r=0,o=n.length;r<o;r++){var i=n[r];m.isObject(i)&&t.push(e(n[r])),m.isString(i)&&t.push('"'+i+'"'),m.isNumber(i)&&t.push(i)}return"["+t.join(",")+"]"}function t(e){if(!m.isString(e))return null;if(window.JSON)return JSON.parse(e);if(rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidchars.test(e.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+e)();throw new Error("invalid JSON data: ",e)}return{array2String:n,string2Object:t}}(),w=function(){function e(e){return r.apply(e,[0,1])}function n(e){return r.apply(e,[1,e.length])}function t(e){for(var n=[],t=e.length,r=0;r<t;r++)n.indexOf(e[r])<0&&n.push(e[r]);return n}var r=Array.prototype.slice;return{first:e,rest:n,distinct:t}}(),_={fixTarget:function(e){if(!("target"in e)){var n=e.srcElement||e.target;n&&3==n.nodeType&&(n=n.parentNode),e.target=n}return e}},y=function(){function e(e,n){for(var t in n)e[t]=n[t];return e}function n(e){var n=[];for(var t in e)if(null!=e[t])if(m.isArray(e[t])){var r=h.array2String(e[t]);n.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}else n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}return{assign:e,obj2EncodeURI:n}}(),x={get:function(e){try{var n,t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(r))&&(n=unescape(t[2])),n}catch(o){return""}},set:function(e,n,t){var r=t||{},o=r.expires,i=r.path,a=r.domain,c=864e5;if("number"==typeof o){var s=new Date;s.setTime(s.getTime()+o*c),o=s.toUTCString()}try{document.cookie=[e,"=",n,o?";expires="+o:"",i?";path="+i:"",a?";domain="+a:""].join("")}catch(u){console.info("error:",u)}}},S=e("qs_lvt_"+domainId,function(){return m.nowBySeconds().toString()}),b=e("qs_pv_"+domainId,function(){return m.guid().toString()}),q=function(){function e(e,n){var t="";switch(e){case"chrome":t=n.slice(0,8182);break;case"msie":t=n.slice(0,2083);break;case"firefox":t=n.slice(0,65536);break;case"safari":t=n.slice(0,8e4);break;default:t=n}return t}function n(n){n=e(m.getBrowser(),n),console&&console.info&&console.info("data is: ",n);var t="log_img_"+ +new Date,r=window.__qha_log_imgs[t]=new Image;r.onload=r.onerror=function(){window.__qha_log_imgs&&window.__qha_log_imgs[t]&&(window.__qha_log_imgs[t]=null,delete window.__qha_log_imgs[t])},r.src=n}function t(e,n,t){t=t||{},t=y.assign(t,n);var r=y.obj2EncodeURI(t),o=e.indexOf("?")>-1?e+"&"+r:e+"?"+r;return o+"&t="+ +new Date}return window.__qha_log_imgs={},{sendData:n,generateData:t,logData:function(e,r,o){var i=t(e,r,o);n(i)}}}(),k=function(){function e(){var e="BackCompat"==document.compatMode?"body":"documentElement",n=document[e];return Math.max(n.scrollWidth,n.clientWidth)/2}var n=e();return r(window,"resize",function(){n=e()}),function(e){return e-n}}(),C=function(){function e(e){e=_.fixTarget(e);var n=0,t=3,r=e.target,o={};for(o.t=r.nodeName;n<t&&r&&"A"!=r.nodeName;)n++,r=r.parentNode;return o.u=r&&"A"===r.nodeName?r.href:"",o.n=r&&(r.text||r.innerText||r.outerText),o}function n(e){e=_.fixTarget(e);var n={};return e.pageX&&(n.x=e.pageX),e.pageY&&(n.y=e.pageY),n}function t(e,n){var t=[];for(var r in e)t.push(r+":"+encodeURIComponent(e[r]));for(var o in n)t.push(o+":"+encodeURIComponent(n[o]));return t.join(",")}return function(r){var o=e(r);if(!(""==o.u||o.u.indexOf("javascript")>-1)){var i={},a=2,c=n(r),s=t(o,c);i.et=a,i.ep=s,_qha("send",i)}}}(),j=function(e){function n(n){var t=w.first(n),r=w.rest(n);"function"==typeof e[t]&&e[t].apply({},r)}function t(e){for(var t=0,r=e.length;t<r;t++)n(e[t])}return function(){var e=window._qha;e&&e.c&&m.isArray(e.c)&&t(e.c),window._qha=null,window._qha=function(){n(arguments)},window._qha.init=!0}},T=m.nowBySeconds(),I=o(S.get(),T);n(I);var O=c(domainId,T,p);""!==dianjingUser&&i(dianjingUser,I,sGif,y.assign(c(domainId,T,p),a(I)));var E={send:function(e,n,t){return function(t){q.logData(e,n,t)}}(sGif,O)};if(j(E)(),isDataSended||(_qha("send",a(I)),isDataSended=!0),""!==mvid&&d(mvid),r(window,"beforeunload",function(){_qha("send",l())}),null!==idClks){var L=g(idClks);L?r(document,"mousedown",u(L)):console.info("ids error: ",L)}isTrackUrlClick&&r(document,"mousedown",C),""!==pageClks&&r(document,"mousedown",s(pageClks))}}();